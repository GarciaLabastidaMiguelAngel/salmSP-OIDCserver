server:
  port: 0  # Random port for tests

spring:
  datasource:
    url: jdbc:h2:mem:testdb
    username: sa
    password:
    driver-class-name: org.h2.Driver
  
  sql:
    init:
      mode: always
  
  # Redis for session and logout context
  redis:
    host: localhost
    port: 6379
    timeout: 2000ms

logging:
  level:
    root: WARN
    org.springframework.security: INFO

# Application-specific configuration (TEST profile)
app:
  # Session Cookie Configuration for tests
  # secure=false allows MockMvc to work without HTTPS
  session:
    cookie:
      name: SESSION
      path: /
      http-only: true
      secure: false  # MockMvc doesn't use HTTPS
      same-site: Lax
      max-age: ""
      remember-me: false

# OIDC
oidc:
  issuer: http://localhost:8080
  keystore:
    location: classpath:keystore/oidc-keystore.p12
    password: changeit
    alias: oidc
    key-password: changeit

# SAML
saml:
  keystore:
    location: classpath:keystore/saml-keystore.p12
    password: changeit
    alias: saml
    key-password: changeit
  idp:
    entity-id: http://www.okta.com/test-idp
    sso-url: https://test-idp.example.com/sso/saml
    verification-cert-alias: idp
